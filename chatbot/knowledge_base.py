# chatbot/knowledge_base.py

knowledge = {
    "hiii": "Hello! I am DAVIET College Chatbot. How can I help you today?",
    "hi": "Hello! Welcome to DAVIET Chatbot. How can I assist you?",
    "how are you?": "I'm just a bot, but I'm always ready to help you with DAVIET-related questions! ðŸ˜Š",
    "how are u?": "I'm just a bot, but I'm always ready to help you with DAVIET-related questions! ðŸ˜Š",
    "how are u": "I'm just a bot, but I'm always ready to help you with DAVIET-related questions! ðŸ˜Š",
    "who made you": "I was created by the DAVIET development team to help students and visitors with their queries.",
    "who are you": "I'm the official chatbot for DAVIET College, here to assist you with all your queries.",
    "what can you do": "I can answer your questions about DAVIET college, courses, fee structure, hostel, events, and more!",
    "what is your name": "I am the DAVIET College Chatbot. How can I help you today?",
    "your name": "I'm DAVIET College Chatbot. Ask me anything about DAVIET!",
    "hello": "Hello! I am here to help you with information about DAVIET College.",
    "daviet": "DAVIET is the DAV Institute of Engineering & Technology, Jalandhar, a premier technical institute in Punjab.",
    "college": "DAVIET is renowned for technical education, research, and a vibrant student community. It offers undergraduate, postgraduate, and doctoral programs.",
    "courses": "DAVIET offers programs such as B.Tech (CSE, IT, ECE, EE, ME, CE), M.Tech, MBA, MCA, and PhD. For a complete list, visit the Academics or Admissions section on the official website.",
    "admission": "Admissions at DAVIET are merit-based, following government and university norms. Detailed admission guidelines, dates, and application forms are available on the Admissions page.",
    "placement": "The Training & Placement Cell at DAVIET provides internship and placement opportunities with top recruiters, ensuring a high placement rate every year.",
    "recruiters": "Major recruiters at DAVIET include Infosys, TCS, Wipro, Capgemini, IBM, Tech Mahindra, Cognizant, and many more.",
    "hostel": "DAVIET offers separate, well-equipped hostels for boys and girls with security, Wi-Fi, mess, medical facilities, and recreational areas.",
    "hostel facilities": "Hostel residents enjoy furnished rooms, study halls, indoor games, laundry, and regular cultural and sports activities.",
    "faculty": "The faculty at DAVIET comprises experienced and highly qualified professors, assistant professors, and lecturers dedicated to academic and personal growth.",
    "departments": "DAVIET includes departments such as Computer Science & Engineering, Information Technology, Electronics & Communication Engineering, Electrical Engineering, Mechanical Engineering, Civil Engineering, Applied Sciences, Management, and Computer Applications.",
    "library": "The Central Library has a vast collection of books, e-journals, periodicals, reference materials, and provides access to digital resources and a digital library.",
    "contact": "You can contact DAVIET at 0181-6530161, 6530171, or by email at info@davietjal.org. Address: Kabir Nagar, Jalandhar, Punjab 144008.",
    "sports": "The institute has extensive sports facilities, including playgrounds, courts for basketball, volleyball, football, cricket, a gymnasium, and indoor games.",
    "events": "DAVIET regularly hosts technical fests (Technotsav), cultural events (Sabrang), workshops, seminars, conferences, and social outreach programs.",
    "fees": "Fee structure depends on the program. Visit the Admissions > Fee Structure page on the DAVIET website for details.",
    "scholarship": "DAVIET offers merit-based and need-based scholarships, including government scholarships. Check the Scholarships section of the website.",
    "website": "The official website of DAVIET is https://davietjal.org/",
    "principal": "Dr. Manoj Kumar is the Principal of DAVIET. For messages and updates, visit the Principal's Desk on the website.",
    "alumni": "DAVIET has an active alumni network. Alumni can register and connect through the Alumni portal on the website.",
    "location": "DAVIET is located at Kabir Nagar, Jalandhar, Punjab 144008.",
    "address": "Kabir Nagar, Jalandhar, Punjab 144008, India.",
    "how to reach": "DAVIET is well connected by road and rail. It is around 6 km from Jalandhar Railway Station and about 90 km from Amritsar Airport.",
    "ranking": "DAVIET is ranked among the top engineering colleges in Punjab and has received multiple awards for academic excellence.",
    "mission": "DAVIET's mission is to provide quality technical education, foster research, innovation, and prepare students for professional success.",
    "vision": "DAVIET aims to be a centre of excellence in engineering, technology, and management education with global recognition.",
    "anti ragging": "DAVIET strictly enforces an anti-ragging policy. Ragging is strictly prohibited, and any such incident can be reported to the authorities.",
    "ncc": "DAVIET has an NCC unit that encourages discipline, leadership, and community service among students.",
    "nss": "The National Service Scheme (NSS) at DAVIET organizes community service, health camps, and social outreach programs.",
    "workshop": "DAVIET conducts regular workshops and industrial training for practical exposure and skill enhancement.",
    "training and placement": "The Training & Placement Cell provides career guidance, soft skill development, internships, and placements with top companies.",
    "internship": "Students at DAVIET get opportunities for internships in leading industries and organizations.",
    "student clubs": "There are various student clubs for technical, cultural, sports, social activities, and entrepreneurship.",
    "canteen": "The campus has a hygienic and affordable canteen serving a variety of food and beverages.",
    "medical facility": "DAVIET provides medical care and first-aid facilities to students and staff.",
    "wifi": "The entire campus is Wi-Fi enabled to support academic and research activities.",
    "digital library": "The digital library provides access to e-books, journals, and online learning resources.",
    "research": "DAVIET promotes research through funded projects, publications, and industry collaboration.",
    "industry collaboration": "The institute has tie-ups with industries for training, projects, internships, and placements.",
    "hostel rules": "The hostel follows strict rules regarding attendance, visitors, and discipline to ensure student safety.",
    "discipline": "DAVIET maintains strict discipline on campus and encourages a positive, professional learning environment.",
    "convocation": "DAVIET organizes convocation ceremonies to award degrees and celebrate academic achievements.",
    "grievance": "Students can submit grievances online or directly to the Grievance Redressal Cell.",
    "holiday list": "The academic calendar and holiday list are available on the website under the Notices or Academic Calendar section.",
    "timetable": "Departmental timetables are posted on the notice boards and may also be available online or from department offices.",
      "bus facility": "DAVIET offers bus transport services for students and staff from various parts of Jalandhar and nearby towns.",
    "uniform": "The institute may have a dress code for certain departments or during labs. Please refer to your department guidelines.",
    "attendance": "Minimum attendance requirements apply for all courses. Generally, 75% attendance is mandatory to sit in exams.",
    "exam": "DAVIET follows university guidelines for mid-term and end-term examinations. Exam notifications are posted on the website and notice boards.",
    "result": "Exam results are announced as per the university schedule and can be checked on the DAVIET or university website.",
    "ragging": "Ragging is strictly prohibited at DAVIET. Anti-ragging squads and helplines are active on campus.",
    "lost and found": "Lost and found items are reported to or collected from the campus security office.",
    "id card": "Student ID cards are issued during admission and are mandatory for access to facilities and exams.",
    "notices": "All important college notices are available on the Notices section of the website and on department notice boards.",
    "hostel mess": "Hostel mess serves nutritious meals and follows a rotating menu. Mess committees involve student representatives.",
    "room allocation": "Hostel room allocation is based on availability and merit. Apply early for the best options.",
    "parent portal": "Parents can access academic and attendance information through the Parent Portal on the website.",
    "online classes": "The institute supports online classes and e-learning platforms as needed.",
    "faculty directory": "You can find a list of faculty members and their contact details on the Faculty Directory page of the website.",
    "academic calendar": "The academic calendar outlining important dates is published on the website before each session.",
    "disciplinary committee": "DAVIET has a disciplinary committee to address student conduct and maintain campus discipline.",
    "career counseling": "Career counseling services are provided by the Training & Placement Cell and student counselors.",
    "mental health": "The institute offers guidance and counseling services for mental well-being and stress management.",
    "hostel guest": "Guest stay in hostels is subject to permission from the warden and college authorities.",
    "library membership": "All students and staff are members of the central library and can borrow books as per library rules.",
    "book bank": "The Book Bank facility allows students to borrow textbooks for a semester or session.",
    "workshop labs": "DAVIET has well-equipped workshops and laboratories for practical training.",
    "project guidance": "Final year students receive project guidance from assigned faculty mentors.",
    "feedback": "Student feedback is collected every semester to improve academic quality and campus facilities.",
    "suggestion box": "Suggestion boxes are placed at key locations to collect student opinions and ideas.",
    "photocopy": "Photocopy and printing facilities are available in the library and near the admin office.",
    "bank": "There is a bank branch/ATM on campus for the convenience of students and staff.",
    "emergency": "In case of emergencies, contact campus security or the main office immediately.",
    "about daviet": "DAV Institute of Engineering & Technology (DAVIET), Jalandhar, is a premier technical institute established in 2001. It is affiliated to IKG Punjab Technical University and offers high-quality education in engineering, technology, and management. DAVIET is known for excellent infrastructure, top placements, and a vibrant campus life.",
    "about college": "DAV Institute of Engineering & Technology (DAVIET), Jalandhar, is a premier technical institute established in 2001 and managed by DAV College Managing Committee. It is affiliated to IKG Punjab Technical University and is known for quality technical education and vibrant campus life.",
    "thank you": "You're welcome! If you have more questions about DAVIET, feel free to ask.",
    "thanks": "You're welcome! ðŸ˜Š Let me know if you need anything else.",
    "ok": "Alright! If you need more information, just ask.",
    "okay": "Okay! If you have any more questions, I'm here to help.",
    "bye": "Goodbye! Have a great day.",
    "goodbye": "Goodbye! Feel free to come back with more questions.",

    # Engineering Programmes and Intakes
    "courses": (
        "DAVIET offers a range of undergraduate (B.Tech), postgraduate (M.Tech), and doctoral (PhD) programs in engineering and technology.\n"
        "\nUnder-Graduate Programmes (B.Tech):\n"
        "â€¢ Electronics & Communication Engineering â€“ 60 seats (Direct), 6 (Lateral Entry)\n"
        "â€¢ Computer Science & Engineering â€“ 180 seats (Direct), 12 (Lateral Entry)\n"
        "â€¢ Electrical Engineering â€“ 60 seats (Direct), 6 (Lateral Entry)\n"
        "â€¢ Computer Science & Engineering (AI & ML) â€“ 180 seats (Direct), 6 (Lateral Entry)\n"
        "â€¢ Mechanical Engineering â€“ 60 seats (Direct), 6 (Lateral Entry)\n"
        "â€¢ Civil Engineering â€“ 60 seats (Direct), 6 (Lateral Entry)\n"
        "\nPost-Graduate Programmes (M.Tech):\n"
        "â€¢ Computer Science & Engineering (AI & ML) â€“ 18 seats\n"
        "â€¢ Civil Engineering (Structural Engg.) â€“ 18 seats\n"
        "\nFor MBA, MCA, and PhD details, visit the Academics section on the official website."
    ),
    "undergraduate courses": (
    "DAVIET offers the following B.Tech (undergraduate) courses:\n"
    "â€¢ Electronics & Communication Engineering â€“ 60 (Direct), 6 (Lateral Entry)\n"
    "â€¢ Computer Science & Engineering â€“ 180 (Direct), 12 (Lateral Entry)\n"
    "â€¢ Electrical Engineering â€“ 60 (Direct), 6 (Lateral Entry)\n"
    "â€¢ Computer Science & Engineering (AI & ML) â€“ 180 (Direct), 6 (Lateral Entry)\n"
    "â€¢ Mechanical Engineering â€“ 60 (Direct), 6 (Lateral Entry)\n"
    "â€¢ Civil Engineering â€“ 60 (Direct), 6 (Lateral Entry)"
),
"ug courses": (
    "DAVIET offers the following undergraduate courses:\n"
    "â€¢ Electronics & Communication Engineering â€“ 60 (Direct), 6 (Lateral Entry)\n"
    "â€¢ Computer Science & Engineering â€“ 180 (Direct), 12 (Lateral Entry)\n"
    "â€¢ Electrical Engineering â€“ 60 (Direct), 6 (Lateral Entry)\n"
    "â€¢ Computer Science & Engineering (AI & ML) â€“ 180 (Direct), 6 (Lateral Entry)\n"
    "â€¢ Mechanical Engineering â€“ 60 (Direct), 6 (Lateral Entry)\n"
    "â€¢ Civil Engineering â€“ 60 (Direct), 6 (Lateral Entry)\n"
    "â€¢ Bachelor of Computer Applications (BCA) â€“ 60 seats (Direct)\n"
    "â€¢ Bachelor of Hotel Management & Catering Technology (BHMCT) â€“ 60 seats (Direct)\n"
    "â€¢ Bachelor of Business Administration (BBA) â€“ 60 seats (Direct)"
),

    "btech courses": (
        "B.Tech Programs at DAVIET:\n"
        "1. Electronics & Communication Engineering (60 Direct, 6 Lateral)\n"
        "2. Computer Science & Engineering (180 Direct, 12 Lateral)\n"
        "3. Electrical Engineering (60 Direct, 6 Lateral)\n"
        "4. Computer Science & Engineering (AI & ML) (180 Direct, 6 Lateral)\n"
        "5. Mechanical Engineering (60 Direct, 6 Lateral)\n"
        "6. Civil Engineering (60 Direct, 6 Lateral)"
    ),
    "mtech courses": (
        "M.Tech Programs at DAVIET:\n"
        "â€¢ Computer Science & Engineering (AI & ML) â€“ 18 seats\n"
        "â€¢ Civil Engineering (Structural Engg.) â€“ 18 seats"
    ),
    "postgraduate courses": (
        "DAVIET offers the following M.Tech (postgraduate) programs:\n"
        "â€¢ Computer Science & Engineering (AI & ML) â€“ 18 seats\n"
        "â€¢ Civil Engineering (Structural Engg.) â€“ 18 seats"
    ),

"btech fee": (
    "For B.Tech students, the fee is â‚¹53,850 for odd semesters (1st, 3rd, 5th, 7th) "
    "and â‚¹33,500 for even semesters (2nd, 4th, 6th, 8th)."
),
"fee structure": (
    "B.Tech Fee Structure at DAVIET:\n"
    "- Odd Semester (1st, 3rd, 5th, 7th): â‚¹53,850\n"
    "- Even Semester (2nd, 4th, 6th, 8th): â‚¹33,500\n"
    "For M.Tech and other courses, please visit the official website or contact admissions."
),
"help": (
    "I'm here to help! You can ask about:\n"
    "â€¢ Courses (B.Tech, M.Tech, etc.)\n"
    "â€¢ Fee structure\n"
    "â€¢ Hostel facilities\n"
    "â€¢ Admissions, events, and more\n"
    "Or visit the DAVIET website: https://davietjal.org/"
),
"semester fee": (
    "The semester fee for B.Tech at DAVIET is:\n"
    "Odd Semester: â‚¹53,850\n"
    "Even Semester: â‚¹33,500"
),
"what is the fee for btech": (
    "The B.Tech fee at DAVIET is â‚¹53,850 for odd semesters and â‚¹33,500 for even semesters."
),
"btech odd semester fee": "The B.Tech odd semester fee is â‚¹53,850.",
"btech even semester fee": "The B.Tech even semester fee is â‚¹33,500.",

}

def find_answer(query):
    query = query.lower().strip()

    # Normalize common query variants to canonical keys
    normalization_map = {
        "ug": "ug courses",
        "ug course": "ug courses",
        "ug courses": "ug courses",
        "undergraduate course": "ug courses",
        "undergraduate courses": "ug courses",
        "undergrad course": "ug courses",
        "undergrad courses": "ug courses",
        "btech": "btech courses",
        "btech course": "btech courses",
        "btech courses": "btech courses",
        "courses": "courses",
        # add more if needed
    }

    # Check if entire query matches normalization map keys
    if query in normalization_map:
        normalized_query = normalization_map[query]
        if normalized_query in knowledge:
            return f"â€¢ {knowledge[normalized_query]}"

    # If no exact normalization, fallback to old matching logic
    matches = []
    for word in query.split():
        for key in knowledge:
            if key in word and knowledge[key] not in matches:
                matches.append(knowledge[key])

    if not matches:
        for key in knowledge:
            if key in query and knowledge[key] not in matches:
                matches.append(knowledge[key])

    if matches:
        return "\n\n".join(f"â€¢ {a}" for a in matches)

    return (
        "I'm sorry, I couldn't find an answer to your question.\n"
        "Try asking about DAVIET's courses, fees, hostel, canteen, sports, or events.\n"
        "You can also visit the official website (https://davietjal.org/) or contact the college office for more information.\n"
        "If you want to try another question, I'm here to help!"
    )
